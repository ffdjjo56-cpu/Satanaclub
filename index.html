<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>SatanaCIub WwW | CT1C2 Engine</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Press+Start+2P&family=Share+Tech+Mono&display=swap');

        :root {
            --main: #f00; --bg: #000; --card-txt: #eee; --panel: rgba(10, 10, 10, 0.95);
        }

        body { 
            background: var(--bg); color: var(--main); font-family: 'Share Tech Mono', monospace; 
            margin: 0; overflow: hidden; height: 100dvh; transition: 0.5s; user-select: none;
        }

        body.pink-mode { --main: #ff69b4; --bg: #fff0f5; --card-txt: #111; --panel: rgba(255,255,255,0.98); }

        .header { font-family: 'Press Start 2P', cursive; font-size: 1.1rem; text-align: center; margin: 20px 0; min-height: 30px; text-transform: uppercase; letter-spacing: 2px; }

        /* --- ASCII 3D RENDER --- */
        .render-box { display: flex; align-items: center; justify-content: center; gap: 20px; margin: 5px 0; }
        #ascii { white-space: pre; font-family: monospace; font-size: 7px; line-height: 7px; text-shadow: 0 0 5px var(--main); }
        .arrow { font-family: 'Press Start 2P'; font-size: 1.5rem; cursor: pointer; color: var(--main); }
        body.pink-mode #ascii { color: #000; text-shadow: none; }

        /* --- UI PAGES --- */
        .page { display: none; position: absolute; inset: 0; flex-direction: column; align-items: center; justify-content: center; z-index: 10; padding: 20px; backdrop-filter: blur(8px); }
        .active-page { display: flex; }

        .card { width: 100%; max-width: 600px; background: var(--panel); border: 1px solid var(--main); padding: 20px; overflow-y: auto; max-height: 50vh; color: var(--card-txt); line-height: 1.6; }
        .btn { width: 300px; padding: 15px; margin: 5px; background: none; border: 2px solid var(--main); color: var(--main); font-family: 'Press Start 2P'; font-size: 9px; cursor: pointer; text-transform: uppercase; transition: 0.2s; }
        .btn:hover { background: var(--main); color: #000; }

        /* --- KILL FEED (QUEUE) --- */
        #kill-feed { 
            position: fixed; top: 15%; left: 50%; transform: translateX(-50%); 
            color: #f00; font-family: 'Press Start 2P'; font-size: 10px; 
            z-index: 1000; pointer-events: none; text-align: center; 
            text-shadow: 0 0 10px #f00; opacity: 0; transition: opacity 0.4s;
        }

        /* --- SETTINGS --- */
        #settings-box { display: none; position: absolute; background: var(--panel); border: 2px solid var(--main); padding: 20px; z-index: 50; width: 280px; box-shadow: 0 0 30px #000; }
        .setting-row { display: flex; justify-content: space-between; align-items: center; margin: 10px 0; font-size: 12px; }

        .bottom-row { display: flex; align-items: center; gap: 10px; margin: 8px auto; }
        .swipe-container { position: relative; width: 240px; height: 50px; overflow: hidden; border: 2px solid var(--main); }
        .secret-layer { position: absolute; inset: 0; background: var(--main); color: #000; display: flex; align-items: center; justify-content: center; font-family: 'Press Start 2P'; font-size: 8px; z-index: 2; transition: 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275); cursor: grab; }
        .under-layer { position: absolute; inset: 0; background: #000; color: var(--main); display: flex; align-items: center; justify-content: center; font-family: 'Press Start 2P'; font-size: 8px; z-index: 1; }

        #flash-screen { position: fixed; inset: 0; background: #fff; opacity: 0; pointer-events: none; z-index: 9999; }
        .flash-anim { animation: flashEffect 0.3s ease-out; }
        @keyframes flashEffect { 0% { opacity: 0.7; } 100% { opacity: 0; } }

        .broken { background: var(--main); color: var(--main) !important; cursor: pointer; }
        .accent { color: var(--main); font-weight: bold; }
        #rain { position: fixed; inset: 0; z-index: 1; pointer-events: none; opacity: 0.3; }
    </style>
</head>
<body>

    <div id="flash-screen"></div>
    <div id="kill-feed"></div>
    <div id="rain"></div>

    <div id="p-login" class="page active-page">
        <h1 class="header" id="t-login">IDENTIFY YOURSELF</h1>
        <input type="password" id="pass" placeholder="CODE" style="background:none; border:2px solid var(--main); color:var(--main); padding:10px; text-align:center; font-family:'Press Start 2P'; width:180px; margin-bottom:15px;">
        <button class="btn" onclick="checkPass()">INIT_SYSTEM</button>
    </div>

    <div id="p-menu" class="page">
        <h1 class="header" id="t-menu">SatanaCIub WwW</h1>
        
        <div class="render-box">
            <div class="arrow" onclick="modSpeed(0.3)"><</div>
            <div id="ascii"></div>
            <div class="arrow" onclick="modSpeed(0.3)">></div>
        </div>

        <button class="btn" onclick="nav('p-rules')">AER PROTOCOLS</button>
        <button class="btn" onclick="nav('p-forms')">APPLICATIONS</button>
        <button class="btn" onclick="nav('p-duty')">DUTY LIST</button>
        
        <div class="bottom-row">
            <div class="swipe-container">
                <div class="under-layer" onclick="nav('p-shame')">WALL OF SHAME</div>
                <div id="swipe-btn" class="secret-layer">[ СКОРО... ]</div>
            </div>
            <button class="btn" style="width:50px; padding:15px 0;" onclick="toggleSettings()">⚙</button>
        </div>

        <div id="settings-box">
            <p class="header" style="font-size:10px; margin:0 0 10px 0;">SETTINGS</p>
            <div class="setting-row"><span>FLASH EFFECTS</span><input type="checkbox" id="flash-toggle" checked></div>
            <div class="setting-row"><span>RAIN SPEED</span><input type="range" id="speed-slider" min="1" max="10" value="3"></div>
            <button class="btn" style="width:100%; font-size:8px;" onclick="toggleSettings()">CLOSE</button>
        </div>

        <button class="btn" onclick="toggleMode()" style="font-size:7px; border-style: dotted;">TOGGLE REALITY</button>
    </div>

    <div id="p-rules" class="page"><h1 class="header">PROTOCOLS</h1><div class="card"><p>1. Оскорбление родных — <span class="fix accent">БАН НАВСЕГДА</span>.</p><p>2. Дискриминация — <span class="fix accent">БАН</span>.</p><p>3. Политика — <span class="fix">ЧС</span>.</p><p>4. Реклама — <span class="fix">БАН</span>.</p></div><button class="btn" onclick="nav('p-menu')">RETURN</button></div>
    <div id="p-forms" class="page"><h1 class="header">FORMS</h1><div class="card"><p class="accent fix">АНКЕТА НА АДМИНА:</p><p class="fix">1. Ник, @, возраст, активность за неделю.</p><p class="fix">2. Часовой пояс, часы работы.</p><p class="fix">3. Что делать, если не можешь выдать бан/мут?</p><p class="fix">4. Опыт (500+ чел).</p><p class="fix">5. Пересказ AER.</p><hr border="1" color="red" style="margin:15px 0;"><p class="accent fix">ВИЦЕ-ПРЕЗИДЕНТ:</p><p class="fix">1. Идеи по дисциплине.</p><p class="accent fix">ВЕТЕРАН:</p><p class="fix">1. Заслуги перед SatanaCIub.</p></div><button class="btn" onclick="nav('p-menu')">RETURN</button></div>
    <div id="p-duty" class="page"><h1 class="header">DUTY</h1><div class="card"><p><span class="accent">[СТАЖЕР]</span> — Слежка. Прав нет.</p><p><span class="accent">[МОДЕРАТОР]</span> — Муты по AER.</p><p><span class="accent">[АДМИНИСТРАТОР]</span> — Баны.</p><p><span class="accent">[ВИЦЕ-ПРЕЗИДЕНТ]</span> — Управление.</p></div><button class="btn" onclick="nav('p-menu')">RETURN</button></div>
    <div id="p-shame" class="page"><h1 class="header">SHAME LIST</h1><div class="card"><p class="fix"><span class="accent">1. Vinal</span> — Снесен.</p><p class="fix"><span class="accent">2. Григей</span> — Лидер ботов.</p><p class="fix"><span class="accent">3. Релтин</span> — Обиженный фрик.</p></div><button class="btn" onclick="nav('p-menu')">RETURN</button></div>

    <script>
        let angle = 0, rotSpeed = 0.05, isPink = false;
        const glitchChars = "₽%&#@$!*", titleText = "SatanaCIub WwW";
        let rainItems = [], killQueue = [], isProcessingQueue = false;
        let hunter = { x: 0, y: 0, target: null, el: null };

        function doGlitch(id) {
            const el = document.getElementById(id); if(!el) return;
            let i = 0; const timer = setInterval(() => {
                el.innerText = titleText.split("").map((l, idx) => (idx < i) ? titleText[idx] : glitchChars[Math.floor(Math.random()*glitchChars.length)]).join("");
                if(i >= titleText.length) clearInterval(timer); i += 0.3;
            }, 40);
        }

        function render() {
            let res = ""; angle += rotSpeed; if(rotSpeed > 0.05) rotSpeed -= 0.001;
            for(let y = -14; y <= 14; y += 1.5) {
                for(let x = -28; x <= 28; x++) {
                    let rX = x * Math.cos(angle) - y * Math.sin(angle);
                    let rY = x * Math.sin(angle) + y * Math.cos(angle);
                    if(!isPink) {
                        const r = Math.sqrt(rX*rX + rY*rY*4)/7, a = Math.atan2(rY*2, rX);
                        res += (r < (1.5 + 0.5 * Math.sin(a * 5))) ? "†" : " ";
                    } else {
                        const hX = rX/10, hY = -rY/10;
                        res += (Math.pow(hX*hX + hY*hY - 1, 3) - hX*hX * Math.pow(hY, 3) < 0) ? "❤" : " ";
                    }
                }
                res += "\n";
            }
            document.getElementById('ascii').innerText = res;
            
            if(hunter.el) {
                if(!hunter.target || hunter.target.dead) hunter.target = rainItems.find(i => !i.dead);
                else {
                    let dx = hunter.target.x - hunter.x, dy = hunter.target.y - hunter.y;
                    let d = Math.sqrt(dx*dx + dy*dy);
                    if(d < 30) {
                        const victim = hunter.target.name; hunter.target.dead = true; hunter.target.el.style.display = 'none';
                        killQueue.push(victim); processQueue();
                        if(document.getElementById('flash-toggle').checked) document.getElementById('flash-screen').classList.add('flash-anim');
                        setTimeout(() => document.getElementById('flash-screen').classList.remove('flash-anim'), 300);
                        hunter.target = null;
                    } else { hunter.x += dx*0.05; hunter.y += dy*0.05; }
                }
                hunter.el.style.transform = `translate(${hunter.x}px, ${hunter.y}px)`;
            }

            rainItems.forEach(item => {
                if(item.dead) return;
                const s = parseFloat(document.getElementById('speed-slider').value);
                item.y += item.speed * (s / 3);
                if(item.y > window.innerHeight) { item.y = -50; item.x = Math.random()*window.innerWidth; }
                item.el.style.transform = `translate(${item.x}px, ${item.y}px)`;
            });
            requestAnimationFrame(render);
        }

        async function processQueue() {
            if (isProcessingQueue || killQueue.length === 0) return;
            isProcessingQueue = true;
            const victim = killQueue.shift();
            const kf = document.getElementById('kill-feed');
            kf.innerText = `УБИЙЦА @ebu_Dokki УБИЛ ${victim}`;
            kf.style.opacity = '1';
            await new Promise(r => setTimeout(r, 2700));
            kf.style.opacity = '0';
            await new Promise(r => setTimeout(r, 400));
            isProcessingQueue = false; processQueue();
        }

        function initRain() {
            const c = document.getElementById('rain'); c.innerHTML = ''; rainItems = [];
            const h = document.createElement('div'); h.innerText = '@ebu_Dokki'; h.style.position='absolute'; h.style.color='#ff0'; h.style.zIndex='5'; c.appendChild(h);
            hunter.el = h; hunter.x = window.innerWidth/2; hunter.y = window.innerHeight/2;
            const names = ["@Vinal", "@Grigey", "@Reltin", "@Ded", "@Psychokid", "@Lucker"];
            for(let i=0; i<15; i++) {
                const n = names[i%names.length];
                const el = document.createElement('div'); el.innerText = n; el.style.position='absolute'; el.style.fontSize='10px';
                let x = Math.random()*window.innerWidth, y = Math.random()*window.innerHeight;
                c.appendChild(el); rainItems.push({ el, x, y, name: n, speed: 1 + Math.random(), dead: false });
            }
        }

        const swipeBtn = document.getElementById('swipe-btn'); let sX = 0;
        swipeBtn.addEventListener('mousedown', e => sX = e.clientX);
        swipeBtn.addEventListener('mouseup', e => { let d = e.clientX - sX; if(Math.abs(d) > 60) swipeBtn.style.transform = `translateX(${d > 0 ? 110 : -110}%)`; });
        swipeBtn.addEventListener('touchstart', e => sX = e.touches[0].clientX);
        swipeBtn.addEventListener('touchmove', e => { let d = e.touches[0].clientX - sX; if(Math.abs(d) > 60) swipeBtn.style.transform = `translateX(${d > 0 ? 110 : -110}%)`; });

        function toggleSettings() { const b = document.getElementById('settings-box'); b.style.display = (b.style.display === 'block') ? 'none' : 'block'; }
        function nav(id) { document.querySelectorAll('.page').forEach(p => p.classList.remove('active-page')); document.getElementById(id).classList.add('active-page'); if(id === 'p-menu') { swipeBtn.style.transform = 'translateX(0)'; doGlitch('t-menu'); } }
        function checkPass() { if(document.getElementById('pass').value === '2727') nav('p-menu'); else alert("ERROR"); }
        function toggleMode() { isPink = !isPink; document.body.classList.toggle('pink-mode'); }
        function modSpeed(v) { rotSpeed = v; }

        setInterval(() => {
            const items = document.querySelectorAll('.fix'); const t = items[Math.floor(Math.random()*items.length)];
            if(!t.dataset.txt) t.dataset.txt = t.innerText;
            if(Math.random() > 0.85) { t.innerText = "█".repeat(t.innerText.length); t.classList.add('broken'); }
        }, 4500);

        document.addEventListener('click', e => { if(e.target.classList.contains('broken')) { e.target.innerText = e.target.dataset.txt; e.target.classList.remove('broken'); } });
        window.onload = () => { initRain(); render(); doGlitch('t-login'); };
    </script>
</body>
</html>
